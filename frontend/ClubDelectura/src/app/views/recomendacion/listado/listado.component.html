<div class="recomendacion-list-container p-6">
  <div class="recomendacion-header">
    <div class="flex flex-col">
      <h1 class="text-2xl font-bold text-gray-800">Recomendaciones</h1>
      <button 
        (click)="openAddRecomendacion()" 
        class="add-button">
        Añadir Recomendación
      </button>
    </div>
    <a routerLink="/libros" 
      class="explore-button">
      Explorar Libros
    </a>
  </div>

  @if (loading) {
    <div class="flex justify-center items-center h-64">
      <app-loading></app-loading>
    </div>
  }

  @if (error) {
    <div class="flex justify-center items-center h-64">
      <app-error></app-error>
    </div>
  }

  @if (!loading && !error) {
    <div class="recomendacion-grid">
      @for (recomendacion of recomendaciones; track recomendacion.id) {
        <app-recommendation-card
          [recomendacion]="recomendacion"
          (delete)="onDeleteRecomendacion($event)" />
      }
    </div>
  }

  @if (!loading && !error && recomendaciones.length === 0) {
    <div class="no-recomendaciones">
      <p>No hay recomendaciones todavía.</p>
      <button 
        (click)="openAddRecomendacion()" 
        class="first-recommendation-button">
        ¡Sé el primero en recomendar un libro!
      </button>
    </div>
  }
</div>

@if (showDeleteModal) {
  <app-confirm-modal
    [isOpen]="showDeleteModal"
    title="Eliminar Recomendación"
    message="¿Estás seguro de que deseas eliminar esta recomendación? Esta acción no se puede deshacer."
    (confirm)="onConfirmDelete()"
    (cancel)="onCancelDelete()">
  </app-confirm-modal>
}

@if (showAddForm) {
  <div class="modal-overlay">
    <div class="modal-content">
      <app-recomendacion-form (closeForm)="closeAddForm()"></app-recomendacion-form>
    </div>
  </div>
}
