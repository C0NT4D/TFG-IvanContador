<div class="container py-4">
  @if (loading) {
    <app-loading></app-loading>
  }

  @if (error) {
    <app-error [message]="error"></app-error>
  }

  @if (!loading && !error) {
    <div class="row">
      <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h1>Recomendaciones</h1>
          <button class="btn btn-primary" (click)="openAddRecomendacion()">
            <i class="bi bi-plus-lg"></i> Añadir Recomendación
          </button>
        </div>

        @if (showAddForm) {
          <app-recomendacion-form
            [recomendacion]="null"
            (submit)="onSubmitRecomendacion($event)"
            (cancel)="onCancelRecomendacion()">
          </app-recomendacion-form>
        }

        <div class="row row-cols-1 row-cols-md-3 g-4">
          @for (recomendacion of recomendaciones; track recomendacion.id) {
            <div class="col">
              <app-recommendation-card 
                [recomendacion]="recomendacion"
                [showDelete]="isAdmin"
                (delete)="onDeleteRecomendacion(recomendacion.id)">
              </app-recommendation-card>
            </div>
          }
        </div>
      </div>
    </div>
  }

  @if (showDeleteModal) {
    <app-confirm-modal
      title="Eliminar Recomendación"
      message="¿Estás seguro de que quieres eliminar esta recomendación?"
      (confirm)="onConfirmDelete()"
      (cancel)="onCancelDelete()">
    </app-confirm-modal>
  }
</div>
