<div class="usuario-nuevo-container">
  <div class="usuario-nuevo-content">
    <div class="usuario-nuevo-header">
      <h1>Crear Nuevo Usuario</h1>
    </div>

    @if (loading) {
      <app-loading></app-loading>
    }

    @if (error) {
      <app-error [message]="error"></app-error>
    }

    <form [formGroup]="usuarioForm" (ngSubmit)="onSubmit()" class="usuario-form">
      <div class="form-group">
        <label for="nombre">Nombre</label>
        <input 
          type="text" 
          id="nombre" 
          formControlName="nombre" 
          placeholder="Nombre del usuario"
          class="form-input"
        >
        @if (usuarioForm.get('nombre')?.invalid && usuarioForm.get('nombre')?.touched) {
          <div class="error-message">El nombre es requerido</div>
        }
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email" 
          placeholder="Email del usuario"
          class="form-input"
        >
        @if (usuarioForm.get('email')?.invalid && usuarioForm.get('email')?.touched) {
          <div class="error-message">
            @if (usuarioForm.get('email')?.errors?.['required']) {
              El email es requerido
            } @else if (usuarioForm.get('email')?.errors?.['email']) {
              Ingrese un email válido
            }
          </div>
        }
      </div>

      <div class="form-group">
        <label for="contrasena">Contraseña</label>
        <input 
          type="password" 
          id="contrasena" 
          formControlName="contrasena" 
          placeholder="Contraseña del usuario"
          class="form-input"
        >
        @if (usuarioForm.get('contrasena')?.invalid && usuarioForm.get('contrasena')?.touched) {
          <div class="error-message">
            @if (usuarioForm.get('contrasena')?.errors?.['required']) {
              La contraseña es requerida
            } @else if (usuarioForm.get('contrasena')?.errors?.['minlength']) {
              La contraseña debe tener al menos 6 caracteres
            }
          </div>
        }
      </div>

      <div class="form-group">
        <label for="rol">Rol</label>
        <select 
          id="rol" 
          formControlName="rol" 
          class="form-input"
        >
          <option value="ROLE_USER">Usuario</option>
          <option value="ROLE_ADMIN">Administrador</option>
        </select>
      </div>

      <div class="form-actions">
        <button type="submit" class="save-button" [disabled]="usuarioForm.invalid || loading">
          Crear Usuario
        </button>
        <button type="button" class="cancel-button" (click)="cancelar()">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div> 